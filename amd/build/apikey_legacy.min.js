define([],function(){var a={APIKEY_FORM_CONTAINER:"#getapikey_formplaceholder",APIKEY_IFRAME:"#getapikey_iframe",SIGNIN_BUTTON:"#getapikey_signin",SIGNUP_BUTTON:"#getapikey_signup",ENTER_KEY_BUTTON:"#getapikey_enterapikey",LEGACY_FORM_CONTAINER:"#getapikey_legacyform"},b=function(b){document.querySelector(a.APIKEY_FORM_CONTAINER).innerHTML="";var c=document.querySelector(a.LEGACY_FORM_CONTAINER);c&&c.classList.add("hidden");var d=b.target,e=document.querySelector(a.APIKEY_IFRAME),f=d&&e?d.dataset.target:null;e.src=f,e.style.display="block"},c=function(){var b=document.querySelector(a.APIKEY_IFRAME);b.style.display="none",b.src="about:blank"},d=function(d){var e=document.querySelector(a.SIGNIN_BUTTON),f=document.querySelector(a.SIGNUP_BUTTON),g=document.querySelector(a.APIKEY_IFRAME),h=e&&g?e.dataset.target:null;if(h){var i=h.match(/^(https?:\/\/[^\/]+)(.*)$/)[1];e.onclick=b,f&&(f.onclick=b);var j=document.querySelector(a.ENTER_KEY_BUTTON);j.addEventListener("click",function(){c()}),window.addEventListener("message",function(a){a.origin===i&&a.data&&"object"==typeof a.data&&("close"===a.data.action?c():d(a))},!1)}},e=function(b,d){c();var e=document.querySelector(a.LEGACY_FORM_CONTAINER);e.classList.remove("hidden"),b&&""!==b&&(e.querySelector('input[name="apikey"]').value=b,d&&e.querySelector('input[name="submitbutton"]').click())};return{init:function(){d(function(a){"apikey"===a.data.action&&e(a.data.apikey,!0)});var b=document.querySelector(a.ENTER_KEY_BUTTON);b.addEventListener("click",function(){e("",!1)})}}});
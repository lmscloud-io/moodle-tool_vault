define("tool_vault/signon",["exports","./selectors"],(function(_exports,_selectors){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=_exports.closeLoginSignupModal=void 0;
/**
   * Manages login/register with lmsvault.io
   *
   * @module     tool_vault/signon
   * @copyright  2024 Marina Glancy
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */
const openLoginSignupModal=e=>{var _document$querySelect;document.querySelector(_selectors.SELECTORS.APIKEY_FORM_CONTAINER).innerHTML="",null===(_document$querySelect=document.querySelector(_selectors.SELECTORS.LEGACY_FORM_CONTAINER))||void 0===_document$querySelect||_document$querySelect.classList.add("hidden");const signInButton=e.target,loginSignupIframe=document.querySelector(_selectors.SELECTORS.APIKEY_IFRAME),url=signInButton&&loginSignupIframe?signInButton.dataset.target:null;loginSignupIframe.src=url,loginSignupIframe.style.display="block"},closeLoginSignupModal=()=>{const loginSignupIframe=document.querySelector(_selectors.SELECTORS.APIKEY_IFRAME);loginSignupIframe.style.display="none",loginSignupIframe.src="about:blank"};_exports.closeLoginSignupModal=closeLoginSignupModal;_exports.init=onMessage=>{const signInButton=document.querySelector(_selectors.SELECTORS.SIGNIN_BUTTON),signUpButton=document.querySelector(_selectors.SELECTORS.SIGNUP_BUTTON),loginSignupIframe=document.querySelector(_selectors.SELECTORS.APIKEY_IFRAME),url=signInButton&&loginSignupIframe?signInButton.dataset.target:null;if(!url)return;const urlHost=url.match(/^(https?:\/\/[^/]+)(.*)$/)[1];signInButton.onclick=openLoginSignupModal,signUpButton&&(signUpButton.onclick=openLoginSignupModal);document.querySelector(_selectors.SELECTORS.ENTER_KEY_BUTTON).addEventListener("click",(()=>{closeLoginSignupModal()})),window.addEventListener("message",(event=>{event.origin===urlHost&&event.data&&"object"==typeof event.data&&("close"===event.data.action?closeLoginSignupModal():onMessage(event))}),!1)}}));

//# sourceMappingURL=signon.min.js.map